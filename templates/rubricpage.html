{% load static %}
<!DOCTYPE html>
<html lang="en">
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Создать статью</title>
	<link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

<style type="text/css">
	html {
    height:100%;
	}

	body {

    -moz-background-size: 100%; /* Firefox 3.6+ */
    -webkit-background-size: 100%; /* Safari 3.1+ и Chrome 4.0+ */
    -o-background-size: 100%; /* Opera 9.6+ */
	background-size: 100%; /* Современные браузеры */
	height:100%;
	width:100%;
	/*background-repeat: no-repeat center center fixed;*/

    z-index: -1;
	}

#rubricGlower {
    background-color: white;
    border: 1px solid transparent;    
    -webkit-transition: border 0.1s linear, box-shadow 0.3s linear;
       -moz-transition: border 0.1s linear, box-shadow 0.3s linear;
            transition: border 0.1s linear, box-shadow 0.3s linear;
    /*width: 100px;
    height: 100px;
    margin: 50px;*/
}

#rubricGlower.active {
    border-color: red;
    -webkit-box-shadow: 0 0 10px red;
       -moz-box-shadow: 0 0 10px red;
            box-shadow: 0 0 10px red;
}

</style>

</head>
<body>
	<hr>

<div class="container-fluid h-100">
<div class="row mx-0 px-0 justify-content-center h-100">



	<div class="col-10 col-sm-10 col-md-10 col-lg-8 col-xl-8 col-xxl-8 mx-0 px-0 justify-content-center h-100 " >
	<!-- CENTRAL COLUMN -->
		<div class="row mt-5 mx-0 px-1 justify-content-center h-70 border  rounded" style="background-color: rgba(255,255,255,1); opacity: 0.85;">
			{% for rub in rubrics %}
			<div class="row-col-1 m-0 pl-1 py-1 h-100 " >
					<img id="rub{{rub.pk}}" value='' src="{{rub.logo.image.url}}" class="p-0" style="height: 100%; width: 100%;" onclick="chooseRubric('{{rub.pk}}', '{{rub.title}}', '{{rub.background.image.url}}');">			
			</div>
			{% endfor %}
		</div>
		<div class="row mt-5 mx-0 p-0 justify-content-center ">
			<div class="col-8 m-0 px-0 py-1 h-100 justify-content-center" >

			<form id="rubricForm" class="row mb-3 justify-content-center needs-validation" method="GET" novalidate hidden>
				<input type="text" class="form-control" name="title" placeholder="введите название" required>

				<div class="valid-feedback mx-1"><h6>хорошо</h6></div>
				<div class="invalid-feedback mx-1"><h6>некорректный формат названия статьи</h6></div>
				<input id="rubricNum" type="text" value="" name="rubric" hidden>
				<button id="loadBtn" class="btn btn-secondary border mt-2" type="submit">Создать</button>
			</form>
			{%if msg %}<p><h3 id="incorMsg" class="text-secondary text-center">{{msg}}</h3></p>{%endif%}
		</div>

		</div>

	</div>




</div>
</div>



<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>



<script>
	window.onload = function (){
		$('body').css('background', `#f7f7f7`);

	}


function setValidator() {
  'use strict'

  var forms = document.querySelectorAll('.needs-validation')

  Array.prototype.slice.call(forms)
    .forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }

        form.classList.add('was-validated')
      }, false)
    })
}



function chooseRubric(pk, title, background) {
	let incorMsg = document.getElementById('incorMsg');
	if (incorMsg != null) {incorMsg.parentNode.removeChild(incorMsg);}
	document.getElementById('rubricForm').hidden = false;
	document.getElementById("rubricNum").value = pk;
	$('body').css('background', ``);
	$('body').css('background-image', `url(${background}) `);
	oldEl = document.getElementById('rubricGlower');
	if (oldEl){
		$('#rubricGlower').toggleClass('active');
		oldEl.id = oldEl.value;
	}
	newEl = document.getElementById(`rub${pk}`);
	newEl.value = newEl.id;
	newEl.id = 'rubricGlower';
	$('#rubricGlower').toggleClass('active');
	setValidator();
}

function checkEvt(){
    var evTypep=window.performance.getEntriesByType("navigation")[0].type;
       if (evTypep=='reload'){
         window.location.replace("/newarticle");
       }
      
}
checkEvt();

</script>


</body>
</html>
